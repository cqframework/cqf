<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../input-cache/schemas/R5/fhir-single.xsd">
  <a name="intro"> </a>
  <h3>Introduction</h3>
  <p>This implementation guide contains common FHIR assets for use in content IGs
    built using the approach and specifications developed as part of the Clinical
    Quality Framework (<a href="https://confluence.hl7.org/display/CQIWC/Clinical+Quality+Framework">CQF</a>)
    initiative, including the FHIRHelpers and FHIR-ModelInfo libraries.</p>
  <p>The CQF approach brings a suite of standards and methodologies to bear on the problem
    of authoring, sharing, and evaluating clinical knowledge, with the goal of streamlining
    the development and implementation of guideline-based clinical care.</p>
  <p>For more information on this approach, see the <a href="http://hl7.org/fhir/uv/cpg/approach.html">Approach</a>
  and <a href="http://hl7.org/fhir/uv/cpg/methodology.html">Methodology</a> sections of the FHIR
  Clinical Guidelines implementation guide.</p>
  <h3>Contents</h3>
  <p>This implementation guide contains libraries that facilitate the use of CQL with FHIR, as explained in the sections
    below. To use these libraries in your implementation guide, include a reference to this implementation guide as
    an implementation guide dependency:</p>
  <pre><code>&lt;dependsOn id=&quot;cqf&quot;&gt;
  &lt;uri value=&quot;http://fhir.org/guides/cqf/ImplementationGuide/cqf.fhir.common&quot;/&gt;
  &lt;packageId value=&quot;cqf.fhir.common&quot;/&gt;
  &lt;version value=&quot;4.0.1&quot;/&gt;
&lt;/dependsOn&gt;</code></pre>

  <h4>FHIR ModelInfo</h4>
  <p>Clinical Quality Language (<a href="http://cql.hl7.org">CQL</a>) is a high-level,
  domain-specific language focused on clinical quality and targeted at measure and
  decision support artifact authors. In addition, the CQL specification provides a
  machine-readable canonical representation called Expression Logical Model
  (<a href="https://cql.hl7.org/04-logicalspecification.html">ELM</a>) targeted at
  implementations and designed to enable automated sharing of clinical knowledge.</p>
  <p>To use CQL with FHIR, <a href="https://cql.hl7.org/07-physicalrepresentation.html#data-model-references">model
  information</a> must be provided to the implementation environment. The <a href="Library-FHIR-ModelInfo.html">FHIR-ModelInfo</a>
  library provides this information for FHIR. To use FHIR, include a <a href="https://cql.hl7.org/02-authorsguide.html#data-models">using
  declaration</a> as shown in the example below:</p>
  <pre><code>using FHIR version '4.0.1'</code></pre>
  <p>Although not required by CQL, current best-practice is to include the version of FHIR.</p>
  <h4>FHIR Helpers</h4>
  <p>As an exchange specification, FHIR has a rich syntax for expressing the values of elements defined in FHIR
  resources. In particular, FHIR data types for representing basic values such as integers, strings, and dates and
  times allow for <a href="http://hl7.org/fhir/extensibility.html#extension">extensions</a>. This means that a FHIR
  <code>string</code> is not just a string value, but has elements (specifically, <code>id</code>, <code>extension</code>, and
  <code>value</code>, where the <code>value</code> element contains the actual string value). This means that to access
  the actual value of a FHIR <code>string</code> element in CQL, authors would need to reference the <code>value</code> element:</p>
  <pre><code>define "Patient is Female":
  Patient.gender.value = 'female'</code></pre>
  <p>To avoid this, the FHIRHelpers library defines implicit conversions for all the FHIR types, allowing authors to treat
  FHIR elements as integers, strings, etc. directly:</p>
  <pre><code>define "Patient is Female":
  Patient.gender = 'female'</code></pre>
  <p>Note that these conversions are performed automatically by the <a href="https://github.com/cqframework/clinical_quality_language/blob/master/Src/java/cql-to-elm/OVERVIEW.md">
  CQL-to-ELM translator</a> when they are used by CQL, resulting in a conversion error if the FHIRHelpers library is not included using
  an <a href="https://cql.hl7.org/02-authorsguide.html#libraries">include declaration</a>:</p>
  <pre><code>include FHIRHelpers version '4.0.1'</code></pre>
  <p>Again, the version of the library is not required by CQL, but for the FHIRHelpers reference, because it is so closely tied to the
  FHIR ModelInfo, current best-practice is to include the version of FHIRHelpers. This does not imply that all library references
  should be versioned, that is a decision left up to implementations.</p>
</div>
